let modalId;


// n.b. commented out blur effect as too heavy

$(document).ready(function() {
  // open modal
  $('.thumb').on('click', function(e) {
    modalId = e.target.id.split('-')[1];  // get id after dash
    $(`#modal-${ modalId }`).scrollTop(0); // reset scroll to top
    $(`#modal-bg`).css("display", "block"); // show modal bg
    $('#anim').css("display", "block"); // show transition anim
    $('body').addClass('modal-open'); // disabling scroll behind
    drawRect = true;
    // $('#work-container').addClass('blur'); // blurring bg
    // $('#home-container').addClass('blur');
    // setTimeout(function() {
    //   $(`#modal-bg`).css("opacity", 1); // fade in modal bg
    // }, 810);  // occurring after blur and desat
    setTimeout(function() {
      $(`#modal-${ modalId }`).css("display", "block"); // show corres modal
    }, 800); // animation takes 20 frames
  });


  // close modal
  // ...if close X is clicked
  $('.close').on('click', function() {
    closeModal();
  });

  // ...or if outside of modal is clicked
  $('#modal-bg').on('click', function() {
    closeModal();
  });

  const closeModal = function() {
    $(`#modal-${ modalId }`).scrollTop(0); // reset scroll to top
    $(`#modal-${ modalId }`).css("display", "none"); // hide corres modal

    $('body').removeClass('modal-open'); // reenable scroll
    // $('#work-container').removeClass('blur'); // remove blur
    // $('#home-container').removeClass('blur');
    // $('#about-container').removeClass('blur');
    $(`#modal-bg`).css("display", "none"); // hide modal bg
    $('#anim').css("display", "none"); // hide transition anim
    drawRect = false;
  };

});
